(function(e){function t(t){for(var a,o,s=t[0],l=t[1],c=t[2],h=0,d=[];h<s.length;h++)o=s[h],i[o]&&d.push(i[o][0]),i[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);u&&u(t);while(d.length)d.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,s=1;s<n.length;s++){var l=n[s];0!==i[l]&&(a=!1)}a&&(r.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},i={0:0},r=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;r.push([0,1]),n()})({0:function(e,t,n){e.exports=n("Vtdi")},"0Lpt":function(e,t,n){"use strict";var a=n("P0ix"),i=n.n(a);i.a},"44Ph":function(e,t,n){},"7uu1":function(e,t,n){},"9aoB":function(e,t,n){"use strict";var a=n("7uu1"),i=n.n(a);i.a},"A+P/":function(e,t,n){},DPpM:function(e,t,n){},LokW:function(e,t,n){},P0ix:function(e,t,n){},"Rj+0":function(e,t,n){"use strict";var a=n("A+P/"),i=n.n(a);i.a},Vtdi:function(e,t,n){"use strict";n.r(t);n("yt8O"),n("VRzm");var a=n("Kw5r"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"bg-white shadow-lg p-4 mb-4",attrs:{id:"head-panel"}},[n("h1",[e._v("CODIV MoviesDB")]),n("nav",{staticClass:"flex items-center flex-wrap"},[n("div",{staticClass:"links"},[n("router-link",{attrs:{to:"/"}},[e._v("Главная")]),e._v(" |\n        "),n("router-link",{attrs:{to:"/about"}},[e._v("О сайте")])],1),n("div",[n("button",{staticClass:"py-1 px-2 mx-1 border border-blue text-blue-darker rounded",class:{"is-active":"ru-ru"===e.lang},on:{click:function(t){e.changeLang("ru-ru")}}},[e._v("RU")]),n("button",{staticClass:"py-1 px-2 mx-1 border border-blue text-blue-darker rounded",class:{"is-active":"en-en"===e.lang},on:{click:function(t){e.changeLang("en-en")}}},[e._v("EN")])]),n("search-form",{staticClass:"ml-auto",attrs:{lang:e.lang}})],1)]),n("transition",{attrs:{name:"fade",mode:"out-in"}},[n("router-view",{attrs:{lang:e.lang}})],1),e._m(0)],1)},r=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("footer",{staticClass:"bg-white mt-8 shadow-inner"},[n("div",{staticClass:"container mx-auto p-8"},[e._v("\n    © 2018 г.\n    ")])])}],o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"relative"},[n("label",{staticClass:"form-label",attrs:{for:"search-form"}},[e._v("Поиск")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.searchQuery,expression:"searchQuery"}],staticClass:"search-form border rounded px-4 py-2",attrs:{autocomplete:"off",type:"text",name:"search",id:"search-form",placeholder:"Поиск по сайту"},domProps:{value:e.searchQuery},on:{keydown:[function(t){return"button"in t||!e._k(t.keyCode,"esc",27,t.key,"Escape")?e.close(t):null},function(t){return"button"in t||!e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?e.highlightNext(t):null},function(t){return"button"in t||!e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?e.highlightPrev(t):null},function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.makeSearch(t):null}],input:function(t){t.target.composing||(e.searchQuery=t.target.value)}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:e.results.length>0,expression:"results.length > 0"}],staticClass:"absolute bg-grey rounded overflow-hidden w-full mt-1 p-2 list-reset shadow-md z-10 flex flex-col"},[n("transition-group",{attrs:{name:"fade",tag:"p"}},e._l(e.results,function(t,a){return n("router-link",{key:t.id,staticClass:"p-2 hover:bg-white rounded",class:{"is-active":a===e.highlightedIndex},attrs:{to:"/movie/"+t.id,tag:"button"}},[e._v("\n      "+e._s(t.title)+"\n      ")])}))],1)])},s=[],l=(n("OG14"),n("vDqi")),c=n.n(l),u={api_key:"6967a070bb2d757feee75a6373d0e0f9",lang:"ru",images:{base_url:"http://image.tmdb.org/t/p/",secure_base_url:"https://image.tmdb.org/t/p/",backdrop_sizes:["w300","w780","w1280","original"],logo_sizes:["w45","w92","w154","w185","w300","w500","original"],poster_sizes:["w92","w154","w185","w342","w500","w780","original"],profile_sizes:["w45","w185","h632","original"],still_sizes:["w92","w185","w300","original"]}},h=n("9/5/"),d=n.n(h),p=n("cLDk"),m=n.n(p),g={props:["lang"],data:function(){return{searchQuery:"",results:[],highlightedIndex:null}},methods:{search:d()(function(){var e=this;try{""!==this.searchQuery&&c.a.get("https://api.themoviedb.org/3/search/movie?api_key=".concat(u.api_key,"&language=").concat(this.lang,"&query=").concat(this.searchQuery)).then(function(t){e.highlightedIndex=null,e.results=m()(t.data.results,5)})}catch(e){console.error(e)}},400),makeSearch:function(){null!==this.highlightedIndex?this.$router.push({path:"/movie/".concat(this.results[this.highlightedIndex].id)}):this.$router.push({path:"/search/".concat(this.searchQuery)})},highlightPrev:function(){null===this.highlightedIndex?this.highlightedIndex=this.results.length-1:this.highlightedIndex=this.highlightedIndex-1,this.highlightedIndex<0&&(this.highlightedIndex=this.results.length-1)},highlightNext:function(){null===this.highlightedIndex?this.highlightedIndex=0:this.highlightedIndex=this.highlightedIndex+1,this.highlightedIndex>this.results.length-1&&(this.highlightedIndex=0)},close:function(){this.results=[],this.highlightedIndex=0}},computed:{moviePath:function(){return"/movie/".concat(this.movie.id)}},watch:{searchQuery:function(){this.searchQuery&&this.searchQuery.length>2?this.search():this.results=[]},$route:function(){this.searchQuery=""}}},v=g,f=(n("0Lpt"),n("KHd+")),_=Object(f["a"])(v,o,s,!1,null,"f4f9974e",null),b=_.exports,w={created:function(){this.lang=localStorage.getItem("lang")},data:function(){return{lang:"en-en"}},components:{SearchForm:b},methods:{changeLang:function(e){this.lang=e,localStorage.setItem("lang",e)}}},x=w,y=(n("9aoB"),n("sKBV"),Object(f["a"])(x,i,r,!1,null,null,null)),k=y.exports,C=n("jE9Z"),P=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},I=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"about"},[n("h1",[e._v("This is an about page")])])}],O={created:function(){document.title="О сайте - CODIV Movies"}},$=O,j=Object(f["a"])($,P,I,!1,null,null,null),D=j.exports,M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("MoviesList",{attrs:{lang:e.lang}})],1)},E=[],N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container mx-auto mb-12"},[e.movies?n("div",{staticClass:"flex flex-wrap px-4 mb-4 -mx-4"},e._l(e.movies,function(e){return n("div",{key:e.id,staticClass:"w-full sm:w-1/2 md:w-1/3 lg:w-1/4 xl:w-1/6 mb-4 px-4 rounded flex flex-col"},[n("MovieCard",{attrs:{movie:e}})],1)})):n("div",[e._v("Загрузка...")])])},R=[],q=(n("ls82"),n("MECJ")),Q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("router-link",{staticClass:"no-underline text-grey-darkest flex flex-col flex-1 flex-start bg-white rounded shadow-md overflow-hidden",attrs:{to:e.moviePath}},[n("div",{staticClass:"bg-cover h-64",style:"background-image: url("+e.posterPath+")"}),n("div",{staticClass:"px-2 py-6"},[e._v("\n      "+e._s(e.movie.title)+"\n  ")])])},S=[],V="".concat(u.images.base_url,"w300"),G={props:["movie"],computed:{posterPath:function(){return"".concat(V).concat(this.movie.poster_path)},moviePath:function(){return"/movie/".concat(this.movie.id)}}},L=G,z=Object(f["a"])(L,Q,S,!1,null,null,null),K=z.exports,B={props:["lang"],data:function(){return{movies:null}},name:"MoviesList",created:function(){this.fetchData()},methods:{fetchData:function(){var e=Object(q["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:c.a.get("https://api.themoviedb.org/3/discover/movie?sort_by=popularity.desc&api_key=".concat(u.api_key,"&language=").concat(this.lang)).then(function(e){t.movies=e.data.results});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},components:{MovieCard:K},watch:{lang:"fetchData"}},T=B,A=Object(f["a"])(T,N,R,!1,null,null,null),H=A.exports,J={props:["lang"],name:"home",components:{MoviesList:H},created:function(){document.title="Главная - CODIV Movies"}},U=J,W=Object(f["a"])(U,M,E,!1,null,null,null),X=W.exports,F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.movie?n("div",[n("div",{staticClass:"backdrop-container w-full mb-4 shadow-md text-white flex flex-col items-center justify-center relative overflow-hidden"},[n("div",{staticClass:"backdrop w-full h-full bg-no-repeat bg-cover bg-center absolute",style:{backgroundImage:"url("+e.backdropPath+")"}}),n("div",{staticClass:"z-0 movieTitle"},[n("h1",{staticClass:"mb-2 text-center md:text-5xl"},[e._v(e._s(e.movie.title))]),n("div",{staticClass:"md:text-3xl"},[e._v(e._s(e.movie.tagline))])])]),n("div",{staticClass:"container mx-auto px-4"},[n("div",{staticClass:"flex flex-wrap -mx-2"},[n("div",{staticClass:"w-full sm:w-1/4 px-2"},[n("img",{staticClass:"rounded overflow-hidden w-full shadow-md mb-4",attrs:{src:e.posterPath,alt:e.movie.title}})]),n("div",{staticClass:"w-full sm:w-3/4 px-2"},[n("div",{staticClass:"p-4 rounded shadow-md bg-white"},[n("div",{staticClass:"leading-normal"},[n("p",{staticClass:"mb-4"},[e._v("\n            "+e._s(e.movie.overview)+"\n          ")]),n("ul",[n("li",[n("strong",[e._v("Жанр: ")]),e._l(e.movie.genres,function(t){return n("span",{key:t.id},[n("span",[e._v(e._s(t.name))]),e._v(",\n                ")])})],2),n("li",[n("strong",[e._v("Длительность: ")]),e._v(" "+e._s(e.movie.runtime)+" мин.")]),n("li",[n("strong",[e._v("Дата выпуска: ")]),e._v(" "+e._s(e.movie.release_date))])]),e.movieVideos?n("div",e._l(e.movieVideos,function(e){return n("div",{key:e.key,staticClass:"videoPlayerContainer my-2"},[n("iframe",{staticClass:"videoPlayer",attrs:{src:"https://www.youtube.com/embed/"+e.key,frameborder:"0",allow:"autoplay; encrypted-media",allowfullscreen:""}})])})):n("p",[e._v("Загрузка...")])])])])])])]):e._e()},Y=[],Z="".concat(u.images.base_url,"w342"),ee="".concat(u.images.base_url,"w780"),te={props:["lang"],data:function(){return{movie:null,movieVideos:null}},created:function(){this.fetchData()},methods:{fetchData:function(){var e=Object(q["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:try{c.a.get("https://api.themoviedb.org/3/movie/".concat(this.$route.params.id,"?api_key=").concat(u.api_key,"&language=").concat(this.lang)).then(function(e){t.movie=e.data,console.log(t.movie),document.title=t.movie.title+" - CODIV Movies"}),c.a.get("https://api.themoviedb.org/3/movie/".concat(this.$route.params.id,"/videos?api_key=").concat(u.api_key,"&language=").concat(this.lang)).then(function(e){t.movieVideos=e.data.results,console.log(t.movie)})}catch(e){console.error(e)}case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},computed:{posterPath:function(){return"".concat(Z).concat(this.movie.poster_path)},backdropPath:function(){return"".concat(ee).concat(this.movie.backdrop_path)}},watch:{$route:"fetchData",lang:"fetchData"}},ne=te,ae=(n("rhxX"),Object(f["a"])(ne,F,Y,!1,null,"08a0ad88",null)),ie=ae.exports,re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("movies-of-genre",{attrs:{genreId:e.$route.params.genreId,page:e.$route.params.pageNumber}})},oe=[],se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container mx-auto mb-12"},[e.currentGenreName?n("h1",{staticClass:"mx-4 mb-4"},[e._v("Фильмы жанра «"+e._s(e.currentGenreName)+"»")]):e._e(),e.movies?n("div",{staticClass:"flex flex-wrap px-4 mb-4 -mx-4"},e._l(e.movies,function(e){return n("div",{key:e.id,staticClass:"w-full sm:w-1/2 md:w-1/3 lg:w-1/4 xl:w-1/6 mb-4 px-4 rounded flex flex-col"},[n("MovieCard",{attrs:{movie:e}})],1)})):n("div",[e._v("Загрузка...")]),n("pagination",{attrs:{records:e.totalRecords},on:{paginate:e.runPaginate}})],1)},le=[],ce=(n("f3/d"),n("dRSK"),n("3YlO")),ue={props:["genreId","page"],data:function(){return{movies:null,currentGenreName:null,loaded:!1,totalRecords:500}},name:"MoviesOfGenre",created:function(){this.fetchGenre(),this.page?this.runPaginate(this.page):this.fetchData()},methods:{fetchGenre:function(){var e=this;c.a.get("https://api.themoviedb.org/3/genre/movie/list?api_key=".concat(u.api_key,"&language=").concat(u.lang)).then(function(t){var n=t.data.genres,a=n.find(function(t){return t.id===+e.genreId});e.currentGenreName=a.name})},fetchData:function(){var e=this;c.a.get("https://api.themoviedb.org/3/discover/movie?with_genres=".concat(this.genreId,"&sort_by=popularity.desc&api_key=").concat(u.api_key,"&language=").concat(u.lang)).then(function(t){e.movies=t.data.results,e.totalRecords=t.data.total_results,e.loaded=!0})},runPaginate:function(e){var t=this;this.$router.push({path:"/genre/".concat(this.genreId,"/page/").concat(e)}),c.a.get("https://api.themoviedb.org/3/discover/movie?with_genres=".concat(this.genreId,"&sort_by=popularity.desc&api_key=").concat(u.api_key,"&language=").concat(u.lang,"&page=").concat(e)).then(function(e){t.movies=e.data.results})}},components:{MovieCard:K,Pagination:ce["Pagination"]},watch:{$route:function(){window.scroll({top:0,left:0,behavior:"smooth"})}}},he=ue,de=Object(f["a"])(he,se,le,!1,null,null,null),pe=de.exports,me={name:"genre",components:{MoviesOfGenre:pe}},ge=me,ve=(n("Rj+0"),Object(f["a"])(ge,re,oe,!1,null,"10477e5e",null)),fe=ve.exports,_e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("search-query",{attrs:{query:e.$route.params.query,lang:e.lang,page:e.$route.params.pageNumber}})},be=[],we=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container mx-auto mb-12"},[n("h1",{staticClass:"mx-4 mb-4"},[e._v("Результаты поиска по фразе «"+e._s(e.query)+"»")]),e.movies?n("div",{staticClass:"flex flex-wrap px-4 mb-4 -mx-4"},e._l(e.movies,function(e){return n("div",{key:e.id,staticClass:"w-full sm:w-1/2 md:w-1/3 lg:w-1/4 xl:w-1/6 mb-4 px-4 rounded flex flex-col"},[n("MovieCard",{attrs:{movie:e}})],1)})):n("div",[e._v("Загрузка...")]),n("pagination",{attrs:{records:e.totalRecords},on:{paginate:e.runPaginate}})],1)},xe=[],ye={props:["query","page","lang"],data:function(){return{movies:null,currentGenreName:null,loaded:!1,totalRecords:500}},name:"SearchQuery",created:function(){this.fetchData(),this.page?this.runPaginate(this.page):this.fetchData()},methods:{fetchData:function(){var e=this;c.a.get("https://api.themoviedb.org/3/search/movie?api_key=".concat(u.api_key,"&language=").concat(this.lang,"&query=").concat(this.query)).then(function(t){e.movies=t.data.results,e.totalRecords=t.data.total_results,e.loaded=!0})},runPaginate:function(e){var t=this;this.$router.push({path:"/search/".concat(this.query,"/page/").concat(e)}),c.a.get("https://api.themoviedb.org/3/search/movie?api_key=".concat(u.api_key,"&language=").concat(this.lang,"&page=").concat(e,"&query=").concat(this.query)).then(function(e){t.movies=e.data.results})}},components:{MovieCard:K,Pagination:ce["Pagination"]},watch:{query:function(){this.fetchData()},$route:function(){window.scroll({top:0,left:0,behavior:"smooth"})}}},ke=ye,Ce=Object(f["a"])(ke,we,xe,!1,null,null,null),Pe=Ce.exports,Ie={props:["lang"],name:"search-results",components:{SearchQuery:Pe}},Oe=Ie,$e=(n("iNKH"),Object(f["a"])(Oe,_e,be,!1,null,"4d60ed00",null)),je=$e.exports;a["default"].use(C["a"]);var De=new C["a"]({mode:"history",scrollBehavior:function(e,t,n){return n||{x:0,y:0}},routes:[{path:"/",name:"Home",component:X},{path:"/movie/:id",name:"Movie Detail",component:ie},{path:"/search/:query",name:"Search Results",component:je,children:[{path:"page/:pageNumber",component:je}]},{path:"/genre/:genreId",name:"Genre",component:fe,children:[{path:"page/:pageNumber",component:fe}]},{path:"/about",name:"about",component:D}]});a["default"].config.productionTip=!1,new a["default"]({router:De,render:function(e){return e(k)}}).$mount("#app")},iNKH:function(e,t,n){"use strict";var a=n("DPpM"),i=n.n(a);i.a},rhxX:function(e,t,n){"use strict";var a=n("44Ph"),i=n.n(a);i.a},sKBV:function(e,t,n){"use strict";var a=n("LokW"),i=n.n(a);i.a}});
//# sourceMappingURL=app.06d44517.js.map